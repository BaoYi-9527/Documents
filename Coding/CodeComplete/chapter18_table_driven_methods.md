### 第18章 · 表驱动法

> 表驱动法是一种编程模式(scheme)——从表里面查找信息而不使用逻辑语句(if、case)。
> 事实上，凡是能通过逻辑语句来选择的事物，都可以通过查表来选择。
> 对简单的情况来说，使用逻辑语句更为容易和直白。但随着逻辑链的越来越复杂，查表法也就愈发显得更具有吸引力。

#### 18.1 表驱动法使用总则

**使用表驱动法的俩个问题：**
1. 如何从表中查询条目?一些数据可以直接用来访问表，但另一些数据可能很难用于查表。从表中查询记录的方法：①直接访问；②索引访问；③阶梯访问。
2. 应该在表中存什么?如果是数据，可以在表中存数据；如果是动作(action)，可以在表中保存该动作的代码(闭包?)。

*表驱动法，其实是将条件判断/逻辑语句中的条件映射到了"表"中，通过键值对的类似方式实现条件？这里的表不要主观上去理解为数据表，也可以是数组映射、Hash-Table等等*

#### 18.2 直接访问表

> 表驱动法的优势之一就是可以将表里面的数据存放在文件中，在程序运行时再读取这些时间。
> 这样一来就可以在不改变程序本身的情况下动态调整程序执行中的参数。

**构造查询键值**

1. 并不是所有的数据都是键值一一对应的，也就是存在范围映射的数据（例如：未满18周岁被称为“未成年人”）

2. 对于这样的数据，构造查询表键值时，可以考虑：

   ①复制信息从而能够直接使用键值

   ②转换键值以使其能够直接使用
   ③把键值转换提取成独立的子程序




#### 18.3 索引表访问

1. 当使用索引时，先用一个基本类型的数据从一张索引表中查出一个键值，然后再利用这一键值查出主数据。

2. 索引访问有俩个主要优点：

   ①如果主查询表中的每一条记录都很大，那么创建一个浪费了很多空间的索引数组所用的空间，就要比创建一个浪费了很多空间的主查询表所用的空间小得多。

   ②即使使用了索引之后没有节省内存空间，操作位于索引中的记录有时也要比位于主表中的记录更方便更廉价。

3. 索引访问技术的另一大优点就是表查询技术在可维护性上所具有的的普遍优点。



> 编写到表中的数据比嵌入到代码中的数据更容易维护。为了使这种灵活性最大化，可以把借助索引访问数据的代码提取/抽象成单独的子程序，然后在希望通过物品编号获得表键值的时候调用该子程序。当需要修改表时，可以考虑更换这种索引访问技术，或者换用另一种表查询技术。



#### 18.4 阶梯访问表
















































#### 18.5 表查询的其他示例
